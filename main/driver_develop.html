<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developing tomato drivers &mdash; tomato 2.2rc2.post4 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/autodoc_pydantic.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom_theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/tomato_ico.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=65034c75"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Version history" href="version.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            tomato
              <img src="_static/tomato.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.2rc2.post4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">tomato user manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developing <strong>tomato</strong> drivers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bootstrapping-a-driver-process">Bootstrapping a <em>driver</em> process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#driver-specific-settings"><em>Driver</em>-specific settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#communication-between-jobs-and-drivers">Communication between <em>jobs</em> and <em>drivers</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#best-practices-when-developing-a-driver">Best Practices when developing a <em>driver</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#driverinterface-ver-2-1">DriverInterface ver. 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#driverinterface-ver-2-0">DriverInterface ver. 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#driverinterface-ver-1-0">DriverInterface ver. 1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="version.html">Version history</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">tomato driver library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dgbowl/tomato-example-counter">tomato-example-counter</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dgbowl/tomato-psutil">tomato-psutil</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dgbowl/tomato-bronkhorst">tomato-bronkhorst</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dgbowl/tomato-jumo">tomato-jumo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dgbowl/tomato-mcc">tomato-mcc</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/dgbowl/tomato-picovna">tomato-picovna</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">tomato autodocs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apidoc/tomato.html">tomato package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tomato</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Developing <strong>tomato</strong> drivers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/driver_develop.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developing-tomato-drivers">
<span id="driver-develop"></span><h1>Developing <strong>tomato</strong> drivers<a class="headerlink" href="#developing-tomato-drivers" title="Link to this heading"></a></h1>
<p>Since <code class="docutils literal notranslate"><span class="pre">tomato-1.0</span></code>, all device <em>drivers</em> are developed as separate Python packages with their own documentation and versioning. To ensure compatibility of the Manager between the <code class="docutils literal notranslate"><span class="pre">tomato-driver</span></code> process and the implementation of the <em>driver</em>, an abstract class <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface" title="tomato.driverinterface_2_1.ModelInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code></a> is provided. A class inheriting from this abstract class, with the name <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code>, <strong>has</strong> to be available when the selected <em>driver</em> module is imported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface" title="tomato.driverinterface_2_1.ModelInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code></a> is versioned. Your driver should target a single version of this <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code> by inheriting from only one such abstract class. <strong>Any deprecation notices will be provided well in advance directly to driver maintainers.</strong> Support for <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#module-tomato.driverinterface_1_0" title="tomato.driverinterface_1_0"><code class="xref py py-mod docutils literal notranslate"><span class="pre">driverinterface_1_0</span></code></a> introduced in <code class="docutils literal notranslate"><span class="pre">tomato-1.0</span></code> is guaranteed until at least <code class="docutils literal notranslate"><span class="pre">tomato-3.0</span></code>.</p>
</div>
<section id="bootstrapping-a-driver-process">
<h2>Bootstrapping a <em>driver</em> process<a class="headerlink" href="#bootstrapping-a-driver-process" title="Link to this heading"></a></h2>
<p>When the <em>driver</em> process is launched (as a <code class="docutils literal notranslate"><span class="pre">tomato-driver</span></code>), it’s given information about how to connect to the <code class="docutils literal notranslate"><span class="pre">tomato-daemon</span></code> process and which device <em>driver</em> to spawn. Once a connection to the <code class="docutils literal notranslate"><span class="pre">tomato-daemon</span></code> is established, the <em>driver</em> settings (from the <a class="reference external" href="quickstart.html#settings-file"><em>settings file</em></a>) are fetched, and the <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> is instantiated passing any settings to the constructor. By default, these settings are stored under <code class="xref py py-obj docutils literal notranslate"><span class="pre">DriverInterface.settings</span></code>. Finally, all <em>components</em> on all <em>devices</em> of this <em>driver</em> type that are known to <code class="docutils literal notranslate"><span class="pre">tomato-daemon</span></code> are registered using the <code class="xref py py-func docutils literal notranslate"><span class="pre">cmp_register()</span></code> function.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each <em>driver</em> creates a separate log file for each port <strong>tomato</strong> has been executed with. The logfile is stored in the same location as the <code class="docutils literal notranslate"><span class="pre">tomato-daemon</span></code> logs, i.e. as configured under the <code class="docutils literal notranslate"><span class="pre">logdir</span></code> option in the <a class="reference external" href="quickstart.html#settings-file"><em>settings file</em></a>. The verbosity of the <code class="docutils literal notranslate"><span class="pre">tomato-driver</span></code> process is inherited from the <code class="docutils literal notranslate"><span class="pre">tomato-daemon</span></code> process.</p>
</div>
</section>
<section id="driver-specific-settings">
<h2><em>Driver</em>-specific settings<a class="headerlink" href="#driver-specific-settings" title="Link to this heading"></a></h2>
<p>The following keywords in the driver-specific settings in the <a class="reference external" href="quickstart.html#settings-file"><em>settings file</em></a> are reserved for use by <strong>tomato</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">idle_measurement_interval</span></code>: Specifies the interval (in seconds) after which the <code class="xref py py-func docutils literal notranslate"><span class="pre">cmp_measure()</span></code> function of all <em>components</em> registered on the <em>driver</em> should be called. The <code class="xref py py-func docutils literal notranslate"><span class="pre">cmp_measure()</span></code> checks that <em>components</em> are idle, i.e. without a running <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code>. Overrides any <code class="xref py py-obj docutils literal notranslate"><span class="pre">DriverInterface.idle_measurement_interval</span></code>.</p></li>
</ul>
</section>
<section id="communication-between-jobs-and-drivers">
<h2>Communication between <em>jobs</em> and <em>drivers</em><a class="headerlink" href="#communication-between-jobs-and-drivers" title="Link to this heading"></a></h2>
<p>After the <em>driver</em> process is bootstrapped, it enters the main loop, listening for commands to action or pass to the <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code>. Therefore, if a <em>job</em> needs to submit a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code>, it passes the <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> to the <code class="docutils literal notranslate"><span class="pre">tomato-driver</span></code> process, which actions it on the appropriate <em>component</em> using the <code class="xref py py-func docutils literal notranslate"><span class="pre">task_submit()</span></code> function. Similarly, if a <em>job</em> decides to poll the <em>driver</em> for data, it does so using the <code class="xref py py-func docutils literal notranslate"><span class="pre">task_data()</span></code> function.</p>
<p>In general, methods of the <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> that are prefixed with <code class="docutils literal notranslate"><span class="pre">cmp_*</span></code> deal with managing <em>devices</em> or their <em>components</em> on the <em>driver</em>, methods prefixed with <code class="docutils literal notranslate"><span class="pre">task_*</span></code> deal with managing <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> running or submitted to <em>components</em>, and methods without a prefix deal with configuration or status of the <em>driver</em> itself.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#module-tomato.driverinterface_2_1" title="tomato.driverinterface_2_1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">driverinterface_2_1</span></code></a> contains another abstract class <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice" title="tomato.driverinterface_2_1.ModelDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code></a>. In general, the <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> that you have to implement acts as a pass-through to the (abstract) methods of the <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code>; e.g. <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelInterface.cmp_get_attr()</span></code> is a passthrough function to the appropriate <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_attr()</span></code>.</p>
<p>We expect most of the work in implementing a new <em>driver</em> will actually take place in implementing the <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code> class.</p>
</div>
<p>Currently, when a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> is submitted to a <em>component</em>, a new <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code> is launched on that <em>component</em> that takes care of preparing the <em>component</em> (via <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.prepare_task()</span></code>), executing the <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> (via <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.task_runner()</span></code>), and periodically polling the hardware for data (via the abstract <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.do_task()</span></code>). As each <em>component</em> can only run one <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> at the same time, subsequently submitted <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> are stored in an <code class="xref py py-obj docutils literal notranslate"><span class="pre">ModelDevice.task_list</span></code>, which is a <code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code> used to communicate with the worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>. This worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code> is reinstantiated at the end of every <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Direct access to the <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice.data</span></code> object is not thread-safe. Therefore, a reentrant lock (<code class="xref py py-class docutils literal notranslate"><span class="pre">RLock</span></code>) object is provided as <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice.datalock</span></code>. Reading or writing to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">ModelDevice.data</span></code> with the exception of the <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_data()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.do_task()</span></code> methods should be only carried out when this <code class="xref py py-obj docutils literal notranslate"><span class="pre">datalock</span></code> is acquired, e.g. using a context manager.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice.data</span></code> object is intended to cache data between <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_data()</span></code> calls initiated by the <em>job</em>. This object is therefore cleared whenever <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_data()</span></code> is called; it is the responsibility of the <code class="docutils literal notranslate"><span class="pre">tomato-job</span></code> process to append or store any new data.</p>
</div>
<p>To access the current configuration (i.e. status) of the <em>component</em>, the <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code> provides a <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.status()</span></code> method. The implementation of what is reported as <em>component</em> status is up to the developers of each <em>driver</em> via the <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.attrs()</span></code> function.</p>
<p>To access the latest data of the <em>component</em>, the <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code> provides a <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_last_data()</span></code> method. This will</p>
</section>
<section id="best-practices-when-developing-a-driver">
<h2>Best Practices when developing a <em>driver</em><a class="headerlink" href="#best-practices-when-developing-a-driver" title="Link to this heading"></a></h2>
<ul>
<li><p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.attrs()</span></code> defines the variable attributes of the <em>component</em> that should be accessible, using <code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code>. All entries in <code class="xref py py-func docutils literal notranslate"><span class="pre">attrs()</span></code> should also be present in <code class="xref py py-obj docutils literal notranslate"><span class="pre">ModelDevice.data</span></code>, as the data likely depends on the settings of these <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code>.</p></li>
<li><p>Each <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code> contains a link to its parent <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code> in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">ModelDevice.driver</span></code> object.</p></li>
<li><p>Internal functions of the <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code> should be re-used wherever possible. E.g., reading <em>component</em> attributes should always be carried out using <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_attr()</span></code>.</p></li>
<li><p>Only certain types of Exceptions are caught and logged by the <code class="docutils literal notranslate"><span class="pre">tomato-driver</span></code> process:</p>
<ul class="simple">
<li><p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code> of each <code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code> should raise <code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code> if connection to the <em>component</em>/<em>device</em> was not possible. The instantiation of the <em>component</em> (via <code class="xref py py-func docutils literal notranslate"><span class="pre">ModelInterface.cmp_register()</span></code>) will be carried out automatically 3x, then it has to be done manually via <code class="docutils literal notranslate"><span class="pre">passata</span> <span class="pre">register</span></code>.</p></li>
<li><p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">set_attr()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">get_attr()</span></code> (and others) should raise <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeError</span></code> if the val/attr supplied by the user is invalid. The expectation is that when one of these Exceptions is raised, there is no change to the state of the <em>component</em>.</p></li>
</ul>
<p>Other types of Exceptions are not caught and <strong>will</strong> cause the <code class="docutils literal notranslate"><span class="pre">tomato-driver</span></code> process to crash.</p>
</li>
</ul>
</section>
<section id="driverinterface-ver-2-1">
<h2>DriverInterface ver. 2.1<a class="headerlink" href="#driverinterface-ver-2-1" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tomato.driverinterface_2_1.</span></span><span class="sig-name descname"><span class="pre">ModelInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An abstract base class specifying the driver interface.</p>
<p>Individual driver modules should expose a <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> as a top-level
import, which inherits from this abstract class. Only the methods of this class
are used to interact with <em>drivers</em> and their <em>components</em>.</p>
<p>This class contains one abstract method, <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface.DeviceFactory" title="tomato.driverinterface_2_1.ModelInterface.DeviceFactory"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceFactory()</span></code></a>,
that has to be re-implemented by the driver modules.</p>
<p>All methods of this class should return <code class="xref py py-class docutils literal notranslate"><span class="pre">Reply</span></code> objects (except the
<a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface.DeviceFactory" title="tomato.driverinterface_2_1.ModelInterface.DeviceFactory"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceFactory()</span></code></a> function). However, for better readability, a decorator function
<code class="xref py py-func docutils literal notranslate"><span class="pre">to_reply()</span></code> is provided, so that the types of the return values can be
explicitly defined here.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'2.1'</span></em></dt>
<dd><p>Version of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">DriverInterface</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">idle_measurement_interval</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>The interval (in seconds) after which <code class="xref py py-func docutils literal notranslate"><span class="pre">self.cmp_measure()</span></code> will be executed, when idle.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">devmap</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice" title="tomato.driverinterface_2_1.ModelDevice"><span class="pre">ModelDevice</span></a><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>Map of registered device components, the tuple keys are <cite>component = (address, channel)</cite></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">constants</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>A map that should be populated with driver-specific run-time constants.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">settings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>A settings map to contain driver-specific settings such as <code class="docutils literal notranslate"><span class="pre">dllpath</span></code> for BioLogic</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">retries</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>Map of components which failed to register, with number of retries as values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DeviceFactory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice" title="tomato.driverinterface_2_1.ModelDevice"><span class="pre">ModelDevice</span></a></span></span></dt>
<dd><p>A factory function which is used to pass this instance of the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface" title="tomato.driverinterface_2_1.ModelInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code></a>
to the new <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice" title="tomato.driverinterface_2_1.ModelDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code></a> instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Register a new device component in this driver.</p>
<p>Creates a <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice" title="tomato.driverinterface_2_1.ModelDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code></a> representing a device component, storing it in
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.devmap</span></code> using the provided <cite>address</cite> and <cite>channel</cite>.</p>
<p>Returns the <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code> of capabilities of the registered component as the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Emergency stop function.</p>
<p>Should set the device component into a documented, safe state. The function is
to be only called in case of critical errors, or when the component is being
removed, not as part of normal operation (i.e. it is not intended as a clean-up
after task completion).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Component reset function.</p>
<p>Should set the device component into a documented, safe state. This function
is executed at the end of every job.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_set_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Val</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Set value of the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.Attr" title="tomato.driverinterface_2_1.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> of the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.set_attr" title="tomato.driverinterface_2_1.ModelDevice.set_attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.set_attr()</span></code></a> function. No type or
read-write validation performed here! Returns the validated or coerced
value as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_get_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Val</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Get value of the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.Attr" title="tomato.driverinterface_2_1.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> from the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.get_attr" title="tomato.driverinterface_2_1.ModelDevice.get_attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_attr()</span></code></a> function. No type
coercion is done here. Returns the value as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Get the status report from the specified device component.</p>
<p>Iterates over all <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> on the component that have <code class="docutils literal notranslate"><span class="pre">status=True</span></code> and
returns their values in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code> as a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_capabilities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns the capabilities of the device component.</p>
<p>Pass-through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.capabilities" title="tomato.driverinterface_2_1.ModelDevice.capabilities"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.capabilities()</span></code></a>. Returns the <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code>
of capabilities in <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_attrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Query available <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> on the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.attrs" title="tomato.driverinterface_2_1.ModelDevice.attrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.attrs()</span></code></a> function. Returns the
<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of attributes as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_constants</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Query constants on the specified device component and this driver.</p>
<p>Returns the <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of constants as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_last_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Fetch the last stored data on the component.</p>
<p>Passthrough to <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.get_last_data" title="tomato.driverinterface_2_1.ModelDevice.get_last_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_last_data()</span></code></a>. The data in the form of
a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> is returned as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_measure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Do a single measurement on the component according to its current
configuration.</p>
<p>Fails if the component already has a running task / measurement.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Submit a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> onto the specified device component.</p>
<p>Pushes the supplied <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> into the <code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code> of the component,
then starts the worker thread (if not already started). Checks that the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> is among the capabilities of this component.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns the task readiness status of the specified device component.</p>
<p>The <cite>running</cite> entry in the data slot of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Reply</span></code> indicates whether
a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> is running. The <cite>can_submit</cite> entry indicates whether another
<code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> can be queued onto the device component already.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Stops a running task and returns any collected data.</p>
<p>Pass-through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.stop_task" title="tomato.driverinterface_2_1.ModelDevice.stop_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.stop_task()</span></code></a> and <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface.task_data" title="tomato.driverinterface_2_1.ModelInterface.task_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelInterface.task_data()</span></code></a>.</p>
<p>If there is any cached data, it is returned as a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> in the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code> and the cache is cleared.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Return cached task data on the device component and clean the cache.</p>
<p>Pass-through for <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.get_data" title="tomato.driverinterface_2_1.ModelDevice.get_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_data()</span></code></a>, which should return a
<a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> that is fully annotated.</p>
<p>This function gets called by the job thread every <cite>device.pollrate</cite>, it therefore
incurs some IPC cost.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Validate the provided <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> for submission on the component
identified by <code class="xref py py-obj docutils literal notranslate"><span class="pre">key</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Returns the driver status. Currently that is the names of the components in
the <cite>devmap</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Resets the driver.</p>
<p>Called when the driver process is quitting. Instructs all remaining tasks to
stop. Warns when devices linger. Passes through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface.dev_reset" title="tomato.driverinterface_2_1.ModelInterface.dev_reset"><code class="xref py py-func docutils literal notranslate"><span class="pre">dev_reset()</span></code></a>. This is
not a pass-through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface.dev_teardown" title="tomato.driverinterface_2_1.ModelInterface.dev_teardown"><code class="xref py py-func docutils literal notranslate"><span class="pre">dev_teardown()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tomato.driverinterface_2_1.</span></span><span class="sig-name descname"><span class="pre">ModelDevice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">driver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An abstract base class specifying a manager for an individual component.</p>
<p>This class should handle determining attributes and capabilities of the component,
the reading/writing of those attributes, processing of tasks, and caching and
returning of task data.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">driver</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelInterface" title="tomato.driverinterface_2_1.ModelInterface"><span class="pre">ModelInterface</span></a></em></dt>
<dd><p>The parent <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>The key in <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.driver.devmap</span></code> referring to this object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_list</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Queue</span></em></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code> used to pass <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> to the worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">thread</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Thread</span></em></dt>
<dd><p>The worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Container for cached data on this component.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">last_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Container for last datapoint on this component.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">datalock</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">RLock</span></em></dt>
<dd><p>Lock object for thread-safe data manipulation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">constants</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>Constant metadata of this component.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_runner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Target function for the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> when handling <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code>.</p>
<p>This function waits for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> passed using <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.task_list</span></code>,
then handles setting all <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> using the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.prepare_task" title="tomato.driverinterface_2_1.ModelDevice.prepare_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_task()</span></code></a>
function, and finally handles the main loop of the task, periodically running
the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.do_task" title="tomato.driverinterface_2_1.ModelDevice.do_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">do_task()</span></code></a> function (using <cite>task.sampling_interval</cite>) until the
maximum task duration (i.e. <cite>task.max_duration</cite>) is exceeded.</p>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> is reset to None.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">prepare_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Given a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code>, prepare this component for execution by setting all
<code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> as specified in the <cite>task.task_params</cite> dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">do_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Periodically called task execution function.</p>
<p>This function is responsible for updating <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.data</span></code> with new data, i.e.
performing the measurement. It should also update the value of <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.last_data</span></code>,
so that the component status is consistent with the cached data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">do_measure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>One shot execution worker function.</p>
<p>This function is performs a measurement using the current configuration of
<code class="xref py py-obj docutils literal notranslate"><span class="pre">self.attrs</span></code>, and stores the result in <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.last_data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">stop_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Stops the currently running task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Val</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Val</span></span></span></dt>
<dd><p>Sets the specified <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.Attr" title="tomato.driverinterface_2_1.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> to <code class="xref py py-obj docutils literal notranslate"><span class="pre">val</span></code>.</p>
<p>This function should handle any data type coercion and validation
using e.g. <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.Attr.maximum" title="tomato.driverinterface_2_1.Attr.maximum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Attr.maximum</span></code></a> and <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.Attr.minimum" title="tomato.driverinterface_2_1.Attr.minimum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Attr.minimum</span></code></a>.</p>
<p>Returns the coerced value corresponding to <code class="xref py py-obj docutils literal notranslate"><span class="pre">val</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Val</span></span></span></dt>
<dd><p>Reads the value of the specified <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.Attr" title="tomato.driverinterface_2_1.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a></span></span></dt>
<dd><p>Returns the cached <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.data</span></code> as a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> before
clearing the cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_last_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a></span></span></dt>
<dd><p>Returns the <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.last_data" title="tomato.driverinterface_2_1.ModelDevice.last_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">last_data</span></code></a> object as a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">attrs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.Attr" title="tomato.driverinterface_2_1.Attr"><span class="pre">Attr</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of all available <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capabilities</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">set</span></span></span></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code> of all supported techniques.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Val</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Compiles a status report from <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> marked as <cite>status=True</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">do_run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Resets the component to an initial status.</p>
<p>Stops any running <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> or measurements. Clears the
<a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.task_list" title="tomato.driverinterface_2_1.ModelDevice.task_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">task_list</span></code></a> queue. Resets <a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.data" title="tomato.driverinterface_2_1.ModelDevice.data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data</span></code></a> and creates a new
<a class="reference internal" href="apidoc/tomato.driverinterface_2_1.html#tomato.driverinterface_2_1.ModelDevice.datalock" title="tomato.driverinterface_2_1.ModelDevice.datalock"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datalock</span></code></a>. Restarts the task processing <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tomato.driverinterface_2_1.</span></span><span class="sig-name descname"><span class="pre">Attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximum</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Quantity</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Quantity</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">set</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A Pydantic <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseModel</span></code> used to describe device attributes.</p>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">type</span></em><em class="property"> <span class="pre">[Required]</span></em></dt>
<dd><p>Data type of the attribute</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rw</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em></dt>
<dd><p>Is the attribute read-write?</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">status</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em></dt>
<dd><p>Should the attribute be included in component status?</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">units</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Default units for the attribute, optional.</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">maximum</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Quantity</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Maximum value for the attribute, optional.</p>
<dl class="field-list simple">
<dt class="field-odd">Constraints<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>union_mode</strong> = left_to_right</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">minimum</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Quantity</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Minimum value for the attribute, optional.</p>
<dl class="field-list simple">
<dt class="field-odd">Constraints<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>union_mode</strong> = left_to_right</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">options</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">set</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Allowed set of values for the attribute, optional.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'arbitrary_types_allowed':</span> <span class="pre">True}</span></em></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

</section>
<section id="driverinterface-ver-2-0">
<h2>DriverInterface ver. 2.0<a class="headerlink" href="#driverinterface-ver-2-0" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tomato.driverinterface_2_0.</span></span><span class="sig-name descname"><span class="pre">ModelInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An abstract base class specifying the driver interface.</p>
<p>Individual driver modules should expose a <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> as a top-level
import, which inherits from this abstract class. Only the methods of this class
are used to interact with <em>drivers</em> and their <em>components</em>.</p>
<p>This class contains one abstract method, <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelInterface.DeviceFactory" title="tomato.driverinterface_2_0.ModelInterface.DeviceFactory"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceFactory()</span></code></a>,
that has to be re-implemented by the driver modules.</p>
<p>All methods of this class should return <code class="xref py py-class docutils literal notranslate"><span class="pre">Reply</span></code> objects (except the
<a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelInterface.DeviceFactory" title="tomato.driverinterface_2_0.ModelInterface.DeviceFactory"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceFactory()</span></code></a> function). However, for better readability, a decorator function
<a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.to_reply" title="tomato.driverinterface_2_0.to_reply"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_reply()</span></code></a> is provided, so that the types of the return values can be
explicitly defined here.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'2.0'</span></em></dt>
<dd><p>Version of the <code class="xref py py-obj docutils literal notranslate"><span class="pre">DriverInterface</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">idle_measurement_interval</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>The interval (in seconds) after which <code class="xref py py-func docutils literal notranslate"><span class="pre">self.cmp_measure()</span></code> will be executed, when idle.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">devmap</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice" title="tomato.driverinterface_2_0.ModelDevice"><span class="pre">ModelDevice</span></a><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>Map of registered devices, the tuple keys are <cite>component = (address, channel)</cite></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">constants</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>A map that should be populated with driver-specific run-time constants.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">settings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>A settings map to contain driver-specific settings such as <code class="docutils literal notranslate"><span class="pre">dllpath</span></code> for BioLogic</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DeviceFactory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice" title="tomato.driverinterface_2_0.ModelDevice"><span class="pre">ModelDevice</span></a></span></span></dt>
<dd><p>A factory function which is used to pass this instance of the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelInterface" title="tomato.driverinterface_2_0.ModelInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code></a>
to the new <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice" title="tomato.driverinterface_2_0.ModelDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code></a> instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Register a new device component in this driver.</p>
<p>Creates a <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice" title="tomato.driverinterface_2_0.ModelDevice"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelDevice</span></code></a> representing a device component, storing it in
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.devmap</span></code> using the provided <cite>address</cite> and <cite>channel</cite>.</p>
<p>Returns the <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code> of capabilities of the registered component as the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Emergency stop function.</p>
<p>Should set the device component into a documented, safe state. The function is
to be only called in case of critical errors, or when the component is being
removed, not as part of normal operation (i.e. it is not intended as a clean-up
after task completion).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Component reset function.</p>
<p>Should set the device component into a documented, safe state. This function
is executed at the end of every job.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_set_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Val</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Set value of the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.Attr" title="tomato.driverinterface_2_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> of the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.set_attr" title="tomato.driverinterface_2_0.ModelDevice.set_attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.set_attr()</span></code></a> function. No type or
read-write validation performed here! Returns the validated or coerced
value as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_get_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Val</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Get value of the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.Attr" title="tomato.driverinterface_2_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> from the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.get_attr" title="tomato.driverinterface_2_0.ModelDevice.get_attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_attr()</span></code></a> function. No type
coercion is done here. Returns the value as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Get the status report from the specified device component.</p>
<p>Iterates over all <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> on the component that have <code class="docutils literal notranslate"><span class="pre">status=True</span></code> and
returns their values in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code> as a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_capabilities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns the capabilities of the device component.</p>
<p>Pass-through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.capabilities" title="tomato.driverinterface_2_0.ModelDevice.capabilities"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.capabilities()</span></code></a>. Returns the <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code>
of capabilities in <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_attrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Query available <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> on the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.attrs" title="tomato.driverinterface_2_0.ModelDevice.attrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.attrs()</span></code></a> function. Returns the
<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of attributes as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_constants</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Query constants on the specified device component and this driver.</p>
<p>Returns the <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of constants as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_last_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Fetch the last stored data on the component.</p>
<p>Passthrough to <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.get_last_data" title="tomato.driverinterface_2_0.ModelDevice.get_last_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_last_data()</span></code></a>. The data in the form of
a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> is returned as the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cmp_measure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Do a single measurement on the component according to its current
configuration.</p>
<p>Fails if the component already has a running task / measurement.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">set</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Submit a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> onto the specified device component.</p>
<p>Pushes the supplied <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> into the <code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code> of the component,
then starts the worker thread. Checks that the <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> is among the
capabilities of this component.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns the task readiness status of the specified device component.</p>
<p>The <cite>running</cite> entry in the data slot of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Reply</span></code> indicates whether
a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> is running. The <cite>can_submit</cite> entry indicates whether another
<code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> can be queued onto the device component already.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Stops a running task and returns any collected data.</p>
<p>Pass-through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.stop_task" title="tomato.driverinterface_2_0.ModelDevice.stop_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.stop_task()</span></code></a> and <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelInterface.task_data" title="tomato.driverinterface_2_0.ModelInterface.task_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelInterface.task_data()</span></code></a>.</p>
<p>If there is any cached data, it is returned as a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> in the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code> and the cache is cleared.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Return cached task data on the device component and clean the cache.</p>
<p>Pass-through for <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.get_data" title="tomato.driverinterface_2_0.ModelDevice.get_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">ModelDevice.get_data()</span></code></a>, which should return a
<a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> that is fully annotated.</p>
<p>This function gets called by the job thread every <cite>device.pollrate</cite>, it therefore
incurs some IPC cost.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Validate the provided <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> for submission on the component
identified by <code class="xref py py-obj docutils literal notranslate"><span class="pre">key</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Returns the driver status. Currently that is the names of the components in
the <cite>devmap</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Resets the driver.</p>
<p>Called when the driver process is quitting. Instructs all remaining tasks to
stop. Warns when devices linger. Passes through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelInterface.dev_reset" title="tomato.driverinterface_2_0.ModelInterface.dev_reset"><code class="xref py py-func docutils literal notranslate"><span class="pre">dev_reset()</span></code></a>. This is
not a pass-through to <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelInterface.dev_teardown" title="tomato.driverinterface_2_0.ModelInterface.dev_teardown"><code class="xref py py-func docutils literal notranslate"><span class="pre">dev_teardown()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tomato.driverinterface_2_0.</span></span><span class="sig-name descname"><span class="pre">ModelDevice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">driver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An abstract base class specifying a manager for an individual component.</p>
<p>This class should handle determining attributes and capabilities of the component,
the reading/writing of those attributes, processing of tasks, and caching and
returning of task data.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">driver</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelInterface" title="tomato.driverinterface_2_0.ModelInterface"><span class="pre">ModelInterface</span></a></em></dt>
<dd><p>The parent <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>The key in <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.driver.devmap</span></code> referring to this object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_list</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Queue</span></em></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code> used to pass <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> to the worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">thread</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Thread</span></em></dt>
<dd><p>The worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Container for cached data on this component.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">last_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em></dt>
<dd><p>Container for last datapoint on this component.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">datalock</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">RLock</span></em></dt>
<dd><p>Lock object for thread-safe data manipulation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">constants</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>Constant metadata of this component.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Helper function for starting the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> as a task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">measure</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Helper function for starting the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> as a measurement.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_runner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Target function for the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> when handling <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code>.</p>
<p>This function waits for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> passed using <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.task_list</span></code>,
then handles setting all <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> using the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.prepare_task" title="tomato.driverinterface_2_0.ModelDevice.prepare_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_task()</span></code></a>
function, and finally handles the main loop of the task, periodically running
the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.do_task" title="tomato.driverinterface_2_0.ModelDevice.do_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">do_task()</span></code></a> function (using <cite>task.sampling_interval</cite>) until the
maximum task duration (i.e. <cite>task.max_duration</cite>) is exceeded.</p>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> is re-primed for future <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> at the end
of this function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">meas_runner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Target function for the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> when performing one shot measurements.</p>
<p>Performs the measurement using <code class="xref py py-func docutils literal notranslate"><span class="pre">self.do_measure()</span></code>. Resets <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code>
for future <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">prepare_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Given a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code>, prepare this component for execution by setting all
<code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> as specified in the <cite>task.task_params</cite> dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">do_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Periodically called task execution function.</p>
<p>This function is responsible for updating <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.data</span></code> with new data, i.e.
performing the measurement. It should also update the value of <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.last_data</span></code>,
so that the component status is consistent with the cached data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">do_measure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>One shot execution worker function.</p>
<p>This function is performs a measurement using the current configuration of
<code class="xref py py-obj docutils literal notranslate"><span class="pre">self.attrs</span></code>, and stores the result in <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.last_data</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">stop_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Stops the currently running task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Val</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Val</span></span></span></dt>
<dd><p>Sets the specified <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.Attr" title="tomato.driverinterface_2_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> to <code class="xref py py-obj docutils literal notranslate"><span class="pre">val</span></code>.</p>
<p>This function should handle any data type coercion and validation
using e.g. <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.Attr.maximum" title="tomato.driverinterface_2_0.Attr.maximum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Attr.maximum</span></code></a> and <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.Attr.minimum" title="tomato.driverinterface_2_0.Attr.minimum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Attr.minimum</span></code></a>.</p>
<p>Returns the coerced value corresponding to <code class="xref py py-obj docutils literal notranslate"><span class="pre">val</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Val</span></span></span></dt>
<dd><p>Reads the value of the specified <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.Attr" title="tomato.driverinterface_2_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a></span></span></dt>
<dd><p>Returns the cached <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.data</span></code> as a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a> before
clearing the cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_last_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><span class="pre">Dataset</span></a></span></span></dt>
<dd><p>Returns the <a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.ModelDevice.last_data" title="tomato.driverinterface_2_0.ModelDevice.last_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">last_data</span></code></a> object as a <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2025.7.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">attrs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_2_0.html#tomato.driverinterface_2_0.Attr" title="tomato.driverinterface_2_0.Attr"><span class="pre">Attr</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of all available <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capabilities</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">set</span></span></span></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code> of all supported techniques.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Val</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Compiles a status report from <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> marked as <cite>status=True</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Resets the component to an initial status.</p>
</dd></dl>

</dd></dl>

</section>
<section id="driverinterface-ver-1-0">
<h2>DriverInterface ver. 1.0<a class="headerlink" href="#driverinterface-ver-1-0" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tomato.driverinterface_1_0.</span></span><span class="sig-name descname"><span class="pre">ModelInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An abstract base class specifying the driver interface.</p>
<p>Individual driver modules should expose a <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> which inherits
from this abstract class. Only the methods of this class should be used to interact
with drivers and their devices.</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DeviceManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">driver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>An abstract base class specifying a manager for an individual component.</p>
<p>This class should handle determining attributes and capabilities of the component,
the reading/writing of those attributes, processing of tasks, and caching and
returning of task data.</p>
<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">driver</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface" title="tomato.driverinterface_1_0.ModelInterface"><span class="pre">ModelInterface</span></a></em></dt>
<dd><p>The parent <code class="xref py py-class docutils literal notranslate"><span class="pre">DriverInterface</span></code> instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tuple</span></em></dt>
<dd><p>The key in <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.driver.devmap</span></code> referring to this object.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_list</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Queue</span></em></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code> used to pass <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> to the worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">thread</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Thread</span></em></dt>
<dd><p>The worker <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>Container for cached data on this component.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">datalock</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">RLock</span></em></dt>
<dd><p>Lock object for thread-safe data manipulation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Helper function for starting the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_runner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Target function for the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code>.</p>
<p>This function waits for a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> passed using <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.task_list</span></code>,
then handles setting all <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> using the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager.prepare_task" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager.prepare_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_task()</span></code></a>
function, and finally handles the main loop of the task, periodically running
the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager.do_task" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager.do_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">do_task()</span></code></a> function (using <cite>task.sampling_interval</cite>) until the
maximum task duration (i.e. <cite>task.max_duration</cite>) is exceeded.</p>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.thread</span></code> is re-primed for future <code class="xref py py-class docutils literal notranslate"><span class="pre">Tasks</span></code> at the end
of this function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">prepare_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Given a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code>, prepare this component for execution by settin all
<code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> as specified in the <cite>task.task_params</cite> dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">do_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Periodically called task execution function.</p>
<p>This function is responsible for updating <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.data</span></code> with new data, i.e.
performing the measurement. It should also update the values of all
<code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code>, so that the component status is consistent with the cached data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">stop_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Stops the currently running task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets the specified <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.Attr" title="tomato.driverinterface_1_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> to <cite>val</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span></dt>
<dd><p>Reads the value of the specified <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.Attr" title="tomato.driverinterface_1_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns the cached <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.data</span></code> before clearing the cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">attrs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.Attr" title="tomato.driverinterface_1_0.Attr"><span class="pre">Attr</span></a><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of all available <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">capabilities</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">set</span></span></span></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code> of all supported techniques.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span></dt>
<dd><p>Compiles a status report from <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> marked as <cite>status=True</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span></dt>
<dd><p>Resets the component to an initial status.</p>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">CreateDeviceManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>A factory function which is used to pass this instance of the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface" title="tomato.driverinterface_1_0.ModelInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelInterface</span></code></a>
to the new <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeviceManager</span></code></a> instance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">devmap</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager"><span class="pre">DeviceManager</span></a><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>Map of registered devices, the tuple keys are <cite>component = (address, channel)</cite></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">settings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em></dt>
<dd><p>A settings map to contain driver-specific settings such as <cite>dllpath</cite> for BioLogic</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dev_register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Register a new device component in this driver.</p>
<p>Creates a <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeviceManager</span></code></a> representing a device component, storing it in
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.devmap</span></code> using the provided <cite>address</cite> and <cite>channel</cite>.</p>
<p>The returned <code class="xref py py-class docutils literal notranslate"><span class="pre">Reply</span></code> should contain the capabilities of the registered
component in the <code class="docutils literal notranslate"><span class="pre">data</span></code> slot.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dev_teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Emergency stop function.</p>
<p>Should set the device component into a documented, safe state. The function is
to be only called in case of critical errors, or when the component is being
removed, not as part of normal operation (i.e. it is not intended as a clean-up
after task completion).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dev_reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Component reset function.</p>
<p>Should set the device component into a documented, safe state. This function
is executed at the end of every job.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dev_set_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Set value of the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.Attr" title="tomato.driverinterface_1_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> of the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager.set_attr" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager.set_attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceManager.set_attr()</span></code></a> function. No type or
read-write validation performed here!</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dev_get_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Get value of the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.Attr" title="tomato.driverinterface_1_0.Attr"><code class="xref py py-class docutils literal notranslate"><span class="pre">Attr</span></code></a> from the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager.get_attr" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager.get_attr"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceManager.get_attr()</span></code></a> function. Units are not
returned; those can be queried for all <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> using <code class="xref py py-func docutils literal notranslate"><span class="pre">self.attrs()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dev_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Get the status report from the specified device component.</p>
<p>Iterates over all <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> on the component that have <code class="docutils literal notranslate"><span class="pre">status=True</span></code> and
returns their values in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reply.data</span></code> as a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="quickstart.html#dgbowl_schemas.tomato.payload.Task" title="dgbowl_schemas.tomato.payload_2_2.task.Task"><span class="pre">Task</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Submit a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> onto the specified device component.</p>
<p>Pushes the supplied <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> into the <code class="xref py py-class docutils literal notranslate"><span class="pre">Queue</span></code> of the component,
then starts the worker thread. Checks that the <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> is among the
capabilities of this component.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Returns the task readiness status of the specified device component.</p>
<p>The <cite>running</cite> entry in the data slot of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Reply</span></code> indicates whether
a <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> is running. The <cite>can_submit</cite> entry indicates whether another
<code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> can be queued onto the device component already.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Stops a running task and returns any collected data.</p>
<p>Pass-through to <code class="xref py py-func docutils literal notranslate"><span class="pre">DriverManager.stop_task()</span></code> and <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.task_data" title="tomato.driverinterface_1_0.ModelInterface.task_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">task_data()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">task_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Return cached task data on the device component and clean the cache.</p>
<p>Pass-through for <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager.get_data" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager.get_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceManager.get_data()</span></code></a>, with the caveat that the
<code class="xref py py-class docutils literal notranslate"><span class="pre">dict[list]</span></code> which is returned from the component is here converted to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code> and annotated using units from <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.attrs" title="tomato.driverinterface_1_0.ModelInterface.attrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">attrs()</span></code></a>.</p>
<p>This function gets called by the job thread every <cite>device.pollrate</cite>, it therefore
incurs some IPC cost.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Returns the driver status. Currently that is the names of the components in
the <cite>devmap</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Resets the driver.</p>
<p>Called when the driver process is quitting. Instructs all remaining tasks to
stop. Warns when devices linger. Passes through to <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.dev_reset" title="tomato.driverinterface_1_0.ModelInterface.dev_reset"><code class="xref py py-func docutils literal notranslate"><span class="pre">dev_reset()</span></code></a>. This is
not a pass-through to <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.dev_teardown" title="tomato.driverinterface_1_0.ModelInterface.dev_teardown"><code class="xref py py-func docutils literal notranslate"><span class="pre">dev_teardown()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">capabilities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Returns the capabilities of the device component.</p>
<p>Pass-through to <code class="xref py py-func docutils literal notranslate"><span class="pre">DriverManager.capabilities()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">attrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="apidoc/tomato.html#tomato.models.Reply" title="tomato.models.Reply"><span class="pre">Reply</span></a></span></span></dt>
<dd><p>Query available <code class="xref py py-class docutils literal notranslate"><span class="pre">Attrs</span></code> on the specified device component.</p>
<p>Pass-through to the <a class="reference internal" href="apidoc/tomato.driverinterface_1_0.html#tomato.driverinterface_1_0.ModelInterface.DeviceManager.attrs" title="tomato.driverinterface_1_0.ModelInterface.DeviceManager.attrs"><code class="xref py py-func docutils literal notranslate"><span class="pre">DeviceManager.attrs()</span></code></a> function.</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="version.html" class="btn btn-neutral float-right" title="Version history" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021 - 2024, dgbowl authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other Versions</span>
      v: 2.2rc2.post4
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions"> 
      <script src="../versions.js"></script>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>